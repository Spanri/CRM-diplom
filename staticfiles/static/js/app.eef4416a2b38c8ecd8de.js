webpackJsonp([1],{"1oKC":function(t,e){},"9Sy0":function(t,e){},A616:function(t,e){},FhJ5:function(t,e){},K1PS:function(t,e){},KvY3:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("//Fk"),o=i.n(s),r="https://edms-mtuci.herokuapp.com",a={name:"main",data:function(){return{email:null,password:null,emailForConfirm:null,processConfirm:!1,code:null,password1:null,password2:null,error:null,loginStyle1:"underline",loginStyle2:"none",boxSize:"420px",newPassword:0}},computed:{},methods:{doLogin:function(t){var e=this,i=this.email,n=this.password;this.$store.dispatch("AUTH_REQUEST",{email:i,password:n}).then(function(){e.error=null,e.$router.push("/")}).catch(function(t){'{"non_field_errors":["Unable to log in with provided credentials."]}'==t||'{"email":["Enter a valid email address."]}'==t?e.error="Неверный логин или пароль.":t.length>200?e.error=t.substring(0,200)+"...":e.error=t}),this.$router.push("/")},rememberPassword:function(){var t=this,e=this.emailForConfirm;this.processConfirm=!0,this.$store.dispatch("USER_CONFIRM_UPDATE_PASSWORD",e).then(function(e){t.error=null,t.processConfirm=!1,t.newPassword=2}).catch(function(e){t.processConfirm=!1,e.length>200?"NameError at /rest_auth/password/reset/"==e.substring(0,39)?t.error="Такой email не зарегестрирован в системе.":t.error=e.substring(0,200)+"...":t.error=e})},updatePassword:function(){var t=this,e=this.code,i=this.password1,n=this.password2;i==n?(this.error="Круто клево",this.processConfirm=!0,this.$store.dispatch("USER_CHANGE_PASSWORD",{uid:e.split("/")[0],token:e.split("/")[1],password1:i,password2:n}).then(function(e){t.error=null,t.processConfirm=!1,t.newPassword=0}).catch(function(e){console.log(e),'{"uid":["Invalid value"]}'==e||'{"token":["Invalid value"]}'==e?t.err="Неверный код.":'{"new_password2":["This password is too short. It must contain at least 8 characters.","This password is too common.","This password is entirely numeric."]}'==e?t.err="Слишком короткий пароль.":e.length>200?t.error=e.substring(0,200)+"...":t.error=e})):this.error="Пароли не совпадают."}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainAuth"},[i("div"),t._v(" "),i("div",{staticClass:"login"},[i("div"),t._v(" "),i("div",[0==t.newPassword?i("div",{staticClass:"auth",style:{height:t.boxSize}},[t._m(0),t._v(" "),i("div",[i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"search-box",attrs:{type:"text",placeholder:"Введите логин"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("ПАРОЛЬ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",attrs:{type:"password",placeholder:"Введите пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.doLogin()}}},[t._v("ВОЙТИ")]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"rememberPassword",on:{click:function(e){t.newPassword=1}}},[t._v("\n\t\t\t\t\t\tЗабыли пароль?\n\t\t\t\t\t")])])]):t._e(),t._v(" "),1==t.newPassword?i("div",{staticClass:"auth",style:{height:"360px"}},[t._m(1),t._v(" "),i("p",{staticStyle:{"text-align":"center",padding:"10px","padding-top":"0"}},[t._v(" \n\t\t\t\t\tЭто страница смены пароля. Чтобы подтвердить свою почту, впишите ее в поле.\n\t\t\t\t\tВам придет код на почту, который следует ввести на следующем шаге.\n\t\t\t\t")]),t._v(" "),i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.emailForConfirm,expression:"emailForConfirm"}],staticClass:"search-box",attrs:{type:"email",placeholder:"Введите email"},domProps:{value:t.emailForConfirm},on:{input:function(e){e.target.composing||(t.emailForConfirm=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),t.processConfirm?t._e():i("div",[i("button",{attrs:{type:"submit"},on:{click:function(e){t.newPassword=0,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.rememberPassword()}}},[t._v("ОТПРАВИТЬ")])]),t._v(" "),t.processConfirm?i("div",[i("p",[t._v("Отправляется...")])]):t._e()]):t._e(),t._v(" "),2==t.newPassword?i("div",{staticClass:"auth",style:{height:"500px"}},[t._m(2),t._v(" "),i("p",{staticStyle:{"text-align":"center",padding:"10px","padding-top":"0"}},[t._v(" \n\t\t\t\t\tВведите код подтверждения и новый пароль, а также подтвердите его.\n\t\t\t\t")]),t._v(" "),i("p",[t._v("КОД ПОДТВЕРЖДЕНИЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"search-box",attrs:{type:"email",placeholder:"Введите email"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("p",[t._v("НОВЫЙ ПАРОЛЬ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"search-box",attrs:{type:"password",placeholder:"Введите пароль"},domProps:{value:t.password1},on:{input:function(e){e.target.composing||(t.password1=e.target.value)}}}),t._v(" "),i("p",[t._v("ПОДТВЕРЖДЕНИЕ ПАРОЛЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"search-box",attrs:{type:"password",placeholder:"Подтвердите пароль"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.newPassword=0,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.updatePassword()}}},[t._v("ПОДТВЕРДИТЬ")])]):t._e()]),t._v(" "),t.error?i("p",{staticStyle:{color:"red","max-width":"400px"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]),t._v(" "),i("div")])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("ВХОД")]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("СМЕНА ПАРОЛЯ - ШАГ 1")]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("СМЕНА ПАРОЛЯ - ШАГ 2")]),this._v(" "),e("div")])}]};var l=i("VU/8")(a,c,!1,function(t){i("gDI6")},"data-v-76e093ee",null).exports,u=i("Dd8w"),d=i.n(u),p=i("NYxO"),f={name:"Header",components:{},data:function(){return{search:"",title:"",notif:"",notifHover:!1}},created:function(){this.notif=5,this.title="Открыть профиль\n"+this.getProfile.email},computed:d()({},Object(p.b)({getProfile:"getProfile"}),{notifColor:function(){return this.notifHover?"#aaa9f8":this.notif>0?"#ff7391":"#FFFFFF"},notifIcon:function(){return this.notif>0?"https://img.icons8.com/material/30/ff7373/bell.png":"https://img.icons8.com/material/30/FFFFFF/bell.png"}}),methods:{toMain:function(){this.$router.push("/")},toNotif:function(){this.$router.push("/profile/notif")},toAddDoc:function(){this.$router.push("/addDoc")},toProfile:function(){this.$router.push("/profile/notif")}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{staticClass:"header"},[i("div",{staticClass:"logo",attrs:{title:"На главную"},on:{click:function(e){t.toMain()}}},[i("svg",{attrs:{height:"23pt",viewBox:"0 0 80 80"}},[i("g",[i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 37.9375 C 45.863281 38.402344 46.332031 38.667969 46.816406 38.667969 C 47.019531 38.667969 47.226562 38.621094 47.421875 38.523438 C 47.5 38.480469 55.347656 34.496094 59.21875 33.273438 C 59.921875 33.050781 60.308594 32.300781 60.085938 31.597656 C 59.867188 30.898438 59.121094 30.507812 58.414062 30.730469 C 54.335938 32.019531 46.542969 35.976562 46.210938 36.144531 C 45.554688 36.480469 45.292969 37.28125 45.625 37.9375 Z M 45.625 37.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 46.816406 22.667969 C 47.019531 22.667969 47.226562 22.621094 47.421875 22.523438 C 47.5 22.480469 55.347656 18.496094 59.21875 17.273438 C 59.921875 17.050781 60.308594 16.300781 60.085938 15.597656 C 59.867188 14.898438 59.121094 14.507812 58.414062 14.730469 C 54.335938 16.019531 46.542969 19.976562 46.210938 20.144531 C 45.554688 20.480469 45.292969 21.28125 45.625 21.9375 C 45.863281 22.402344 46.332031 22.667969 46.816406 22.667969 Z M 46.816406 22.667969 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 78.816406 20 C 78.078125 20 77.484375 20.597656 77.484375 21.332031 L 77.484375 73.332031 C 77.484375 75.539062 75.6875 77.332031 73.484375 77.332031 L 41.484375 77.332031 L 41.484375 74.265625 C 43.425781 73.585938 48.492188 72 53.484375 72 C 65.097656 72 72.984375 74.574219 73.0625 74.597656 C 73.464844 74.734375 73.914062 74.664062 74.261719 74.414062 C 74.609375 74.164062 74.816406 73.761719 74.816406 73.332031 L 74.816406 14.667969 C 74.816406 14.042969 74.382812 13.5 73.773438 13.367188 C 73.773438 13.367188 72.726562 13.132812 70.941406 12.804688 C 70.21875 12.671875 69.519531 13.152344 69.386719 13.875 C 69.253906 14.597656 69.734375 15.292969 70.457031 15.425781 C 71.140625 15.550781 71.710938 15.664062 72.148438 15.75 L 72.148438 71.5625 C 69.128906 70.769531 62.417969 69.332031 53.484375 69.332031 C 47.671875 69.332031 41.964844 71.242188 40.203125 71.886719 C 38.632812 71.195312 33.886719 69.332031 28.148438 69.332031 C 18.964844 69.332031 11.398438 70.847656 8.148438 71.617188 L 8.148438 15.699219 C 10.8125 15.042969 18.675781 13.332031 28.148438 13.332031 C 33.011719 13.332031 37.179688 14.847656 38.816406 15.53125 L 38.816406 68 C 38.816406 68.480469 39.074219 68.925781 39.492188 69.160156 C 39.910156 69.398438 40.425781 69.390625 40.835938 69.144531 C 40.96875 69.066406 54.179688 61.175781 65.902344 57.265625 C 66.449219 57.082031 66.816406 56.574219 66.816406 56 L 66.816406 1.332031 C 66.816406 0.898438 66.601562 0.488281 66.242188 0.238281 C 65.882812 -0.0117188 65.425781 -0.0703125 65.011719 0.0859375 C 54.34375 4.085938 43.550781 10.804688 43.441406 10.871094 C 42.820312 11.261719 42.628906 12.082031 43.019531 12.707031 C 43.40625 13.332031 44.230469 13.523438 44.855469 13.132812 C 44.953125 13.070312 54.34375 7.226562 64.148438 3.285156 L 64.148438 55.046875 C 55.046875 58.207031 45.546875 63.371094 41.484375 65.683594 L 41.484375 14.667969 C 41.484375 14.160156 41.195312 13.699219 40.746094 13.472656 C 40.515625 13.359375 35.050781 10.667969 28.148438 10.667969 C 16.101562 10.667969 6.839844 13.273438 6.449219 13.386719 C 5.878906 13.546875 5.484375 14.074219 5.484375 14.667969 L 5.484375 73.335938 C 5.484375 73.75 5.679688 74.144531 6.011719 74.398438 C 6.246094 74.574219 6.527344 74.667969 6.816406 74.667969 C 6.9375 74.667969 7.0625 74.648438 7.179688 74.617188 C 7.273438 74.589844 16.492188 72 28.148438 72 C 33.023438 72 37.1875 73.519531 38.816406 74.199219 L 38.816406 77.335938 L 6.816406 77.335938 C 4.609375 77.335938 2.816406 75.539062 2.816406 73.335938 L 2.816406 21.335938 C 2.816406 20.597656 2.21875 20 1.484375 20 C 0.746094 20 0.148438 20.597656 0.148438 21.335938 L 0.148438 73.335938 C 0.148438 77.011719 3.140625 80 6.816406 80 L 73.484375 80 C 77.160156 80 80.148438 77.011719 80.148438 73.335938 L 80.148438 21.335938 C 80.148438 20.597656 79.554688 20 78.816406 20 Z M 78.816406 20 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 29.9375 C 45.863281 30.402344 46.332031 30.667969 46.816406 30.667969 C 47.019531 30.667969 47.226562 30.621094 47.421875 30.523438 C 47.5 30.480469 55.347656 26.496094 59.21875 25.273438 C 59.921875 25.050781 60.308594 24.300781 60.085938 23.597656 C 59.867188 22.898438 59.121094 22.507812 58.414062 22.730469 C 54.335938 24.019531 46.542969 27.976562 46.210938 28.144531 C 45.554688 28.480469 45.292969 29.28125 45.625 29.9375 Z M 45.625 29.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 45.9375 C 45.863281 46.402344 46.332031 46.667969 46.816406 46.667969 C 47.019531 46.667969 47.226562 46.621094 47.421875 46.523438 C 47.5 46.480469 55.347656 42.496094 59.21875 41.273438 C 59.921875 41.050781 60.308594 40.300781 60.085938 39.597656 C 59.867188 38.898438 59.121094 38.507812 58.414062 38.730469 C 54.335938 40.019531 46.542969 43.976562 46.210938 44.144531 C 45.554688 44.480469 45.292969 45.28125 45.625 45.9375 Z M 45.625 45.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 24.746094 C 24.21875 22.8125 14.863281 25.273438 14.472656 25.378906 C 13.761719 25.570312 13.335938 26.300781 13.527344 27.011719 C 13.6875 27.609375 14.226562 28 14.816406 28 C 14.929688 28 15.046875 27.984375 15.160156 27.957031 C 15.25 27.929688 24.257812 25.5625 31.84375 27.339844 C 32.558594 27.507812 33.28125 27.0625 33.449219 26.347656 C 33.617188 25.628906 33.171875 24.914062 32.453125 24.746094 Z M 32.453125 24.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 32.746094 C 24.21875 30.8125 14.863281 33.273438 14.472656 33.378906 C 13.761719 33.570312 13.335938 34.300781 13.527344 35.011719 C 13.6875 35.609375 14.226562 36 14.816406 36 C 14.929688 36 15.046875 35.984375 15.160156 35.957031 C 15.25 35.929688 24.257812 33.5625 31.84375 35.339844 C 32.558594 35.507812 33.28125 35.0625 33.449219 34.347656 C 33.617188 33.628906 33.171875 32.914062 32.453125 32.746094 Z M 32.453125 32.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 53.9375 C 45.863281 54.402344 46.332031 54.667969 46.816406 54.667969 C 47.019531 54.667969 47.226562 54.621094 47.421875 54.523438 C 47.5 54.480469 55.347656 50.496094 59.21875 49.273438 C 59.921875 49.050781 60.308594 48.300781 60.085938 47.597656 C 59.867188 46.898438 59.121094 46.507812 58.414062 46.730469 C 54.335938 48.019531 46.542969 51.976562 46.210938 52.144531 C 45.554688 52.480469 45.292969 53.28125 45.625 53.9375 Z M 45.625 53.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 40.746094 C 24.21875 38.8125 14.863281 41.273438 14.472656 41.378906 C 13.761719 41.570312 13.335938 42.300781 13.527344 43.011719 C 13.6875 43.609375 14.226562 44.003906 14.816406 44.003906 C 14.929688 44.003906 15.046875 43.984375 15.160156 43.957031 C 15.25 43.929688 24.257812 41.5625 31.84375 43.339844 C 32.558594 43.507812 33.28125 43.0625 33.449219 42.347656 C 33.617188 41.628906 33.171875 40.914062 32.453125 40.746094 Z M 32.453125 40.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 56.746094 C 24.21875 54.8125 14.863281 57.273438 14.472656 57.378906 C 13.761719 57.570312 13.335938 58.300781 13.527344 59.011719 C 13.6875 59.609375 14.226562 60.003906 14.816406 60.003906 C 14.929688 60.003906 15.046875 59.984375 15.160156 59.957031 C 15.25 59.929688 24.257812 57.5625 31.84375 59.339844 C 32.558594 59.507812 33.28125 59.0625 33.449219 58.347656 C 33.617188 57.628906 33.171875 56.914062 32.453125 56.746094 Z M 32.453125 56.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 48.746094 C 24.21875 46.8125 14.863281 49.273438 14.472656 49.378906 C 13.761719 49.570312 13.335938 50.300781 13.527344 51.011719 C 13.6875 51.609375 14.226562 52.003906 14.816406 52.003906 C 14.929688 52.003906 15.046875 51.984375 15.160156 51.957031 C 15.25 51.929688 24.257812 49.5625 31.84375 51.339844 C 32.558594 51.507812 33.28125 51.0625 33.449219 50.347656 C 33.617188 49.628906 33.171875 48.914062 32.453125 48.746094 Z M 32.453125 48.746094 "}})])]),t._v(" "),i("p",[t._v("СЭД МТУСИ")])]),t._v(" "),i("div"),t._v(" "),i("div",{staticClass:"header-right"},[i("div",{staticClass:"icon",attrs:{title:"Добавить документ"},on:{click:t.toAddDoc}},[i("div",[t._v("+")]),t._v(" "),i("svg",{attrs:{fill:"white",width:"30px",height:"30px",viewBox:"0 0 32 32"}},[i("g",{attrs:{"fill-rule":"evenodd",stroke:"none","stroke-width":"1"}},[i("g",[i("path",{attrs:{d:"M19.5,3 L9.00276013,3 C7.89666625,3 7,3.89833832 7,5.00732994 L7,27.9926701 C7,29.1012878 7.89092539,30 8.99742191,30 L24.0025781,30 C25.1057238,30 26,29.1017876 26,28.0092049 L26,10.5 L26,10 L20,3 L19.5,3 L19.5,3 L19.5,3 Z M19,4 L8.9955775,4 C8.44573523,4 8,4.45526288 8,4.99545703 L8,28.004543 C8,28.5543187 8.45470893,29 8.9999602,29 L24.0000398,29 C24.5523026,29 25,28.5550537 25,28.0066023 L25,11 L20.9979131,11 C19.8944962,11 19,10.1134452 19,8.99408095 L19,4 L19,4 Z M20,4.5 L20,8.99121523 C20,9.54835167 20.4506511,10 20.9967388,10 L24.6999512,10 L20,4.5 L20,4.5 Z M15,14 L15,15 L23,15 L23,14 L15,14 L15,14 Z M10,13 L10,16 L13,16 L13,13 L10,13 L10,13 Z M11,14 L11,15 L12,15 L12,14 L11,14 L11,14 Z M10,18 L10,21 L13,21 L13,18 L10,18 L10,18 Z M11,19 L11,20 L12,20 L12,19 L11,19 L11,19 Z M15,19 L15,20 L23,20 L23,19 L15,19 L15,19 Z M10,23 L10,26 L13,26 L13,23 L10,23 L10,23 Z M11,24 L11,25 L12,25 L12,24 L11,24 L11,24 Z M15,24 L15,25 L23,25 L23,24 L15,24 L15,24 Z"}})])])])]),t._v(" "),i("div",{staticClass:"icon",attrs:{title:"Уведомления"},on:{mouseenter:function(e){t.notifHover=!0},mouseleave:function(e){t.notifHover=!1},click:t.toNotif}},[i("div",{style:{color:t.notifColor}},[t._v(t._s(t.notif))]),t._v(" "),i("svg",{style:{fill:t.notifColor},attrs:{width:"30px",height:"30px",viewBox:"25 0 15 78"}},[i("g",{attrs:{id:"Layer_2"}},[i("g",{attrs:{id:"Layer_3"}},[i("path",{attrs:{d:"M54.2,54.4l-5.1-6.3c-0.5-0.7-0.8-1.5-0.8-2.4v-13c0-8.1-5.4-15.3-13.2-17.5v-5.1c0-2.8-2.3-5-5-5s-5,2.3-5,5v5    c-7.9,2.3-13.3,9.5-13.2,17.6v13c0,0.9-0.3,1.7-0.8,2.4l-5.1,6.3c-0.4,0.5-0.7,1.2-0.7,1.9v7.9h49.8v-7.9    C54.9,55.6,54.6,54.9,54.2,54.4z M28,10.1c0-1.1,0.9-2,2-2s2,0.9,2,2v4.5c-1.4-0.2-2.7-0.2-4.1,0V10.1z M51.9,61.1H8.1v-4.8    l5.1-6.3c1-1.2,1.5-2.7,1.5-4.3v-13c0-8.4,6.8-15.3,15.3-15.3s15.3,6.8,15.3,15.3v13c0,1.6,0.5,3.1,1.5,4.3l5.1,6.3V61.1z"}}),t._v(" "),i("path",{attrs:{d:"M28,20.8v3c6.1,0,11.1,5,11.1,11.1c0,0,0,0,0,0h3C42.1,27.1,35.8,20.8,28,20.8C28,20.8,28,20.8,28,20.8z"}}),t._v(" "),i("path",{attrs:{d:"M30,69.9c-2.9,0-5.2-2.3-5.2-5.2h-3c0,4.5,3.7,8.2,8.2,8.2c4.5,0,8.2-3.7,8.2-8.2h-3C35.2,67.6,32.9,69.9,30,69.9z"}})])])])]),t._v(" "),i("img",{staticClass:"profile",attrs:{title:t.title,src:t.getProfile.profile.photo},on:{click:function(e){t.toProfile()}}})])])])},staticRenderFns:[]};var v=i("VU/8")(f,m,!1,function(t){i("eWIM")},"data-v-1c067552",null).exports,h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"background"},[e("div",{staticClass:"footer"},[e("p",[this._v("МТУСИ, 2019")])])])}]};var _=i("VU/8")({name:"Header",data:function(){return{msg:"Welcome to Your Vue.js App"}}},h,!1,function(t){i("A616")},"data-v-c63987f0",null).exports,g=i("mtWM"),C=i.n(g),w={name:"App",components:{Header:v,Footer:_,Auth:l},data:function(){return{closeButtonSize:"300px auto",menuSize:"300px auto",marginLeft:20,close:!1,textClose:"X СВЕРНУТЬ МЕНЮ"}},created:function(){C.a.interceptors.response.use(void 0,function(t){return new o.a(function(e,i){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch(AUTH_LOGOUT),t})})},computed:{closeM:function(){return this.close?(this.menuSize="100%",this.closeButtonSize="0 100%",this.marginLeft=50,this.textClose="!!!",!0):(this.menuSize="300px auto",this.closeButtonSize=this.menuSize,this.marginLeft=20,this.textClose="X СВЕРНУТЬ МЕНЮ",!1)}},methods:{closeMenu:function(){this.close=!this.close}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.$store.getters.isAuthenticated?e("div",{staticClass:"a"},[e("Header"),this._v(" "),e("router-view"),this._v(" "),e("Footer")],1):e("div",[e("Auth")],1)])},staticRenderFns:[]};var S=i("VU/8")(w,y,!1,function(t){i("U1hK")},null,null).exports,x=i("/ocq"),k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu"},[i("div",{staticClass:"link",class:{active:1==t.page},on:{click:function(e){t.page=1}}},[i("router-link",{attrs:{to:{path:"/"}}},[t._v("ВСЕ ДОКУМЕНТЫ")])],1),t._v(" "),i("div",{staticClass:"link",class:{active:2==t.page},on:{click:function(e){t.page=2}}},[i("router-link",{attrs:{to:{path:"/d/common"}}},[t._v("ОБЩИЙ ДОСТУП")])],1),t._v(" "),i("div",{staticClass:"link",class:{active:3==t.page},on:{click:function(e){t.page=3}}},[i("router-link",{attrs:{to:{path:"/d/myDocs"}}},[t._v("МОИ ДОКУМЕНТЫ")])],1)])},staticRenderFns:[]};var L={name:"auth",components:{Menu:i("VU/8")({name:"Menu",data:function(){return{page:1}},methods:{}},k,!1,function(t){i("KvY3")},"data-v-59e46f6a",null).exports},created:function(){}},U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"maing"},[e("Menu"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var b=i("VU/8")(L,U,!1,function(t){i("1oKC")},null,null).exports,E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"headerProfileGradient"},[i("div",{staticClass:"headerProfile"},[i("img",{staticClass:"avatar",attrs:{src:t.profile.photo}}),t._v(" "),t.profile.first_name?i("div",[i("p",{staticStyle:{"font-size":"20px","margin-bottom":"0"}},[t._v("\n\t\t\t\t\t"+t._s(t.profile.second_name)+"\n\t\t\t\t\t"+t._s(t.profile.first_name)+"\n\t\t\t\t\t"+t._s(t.profile.patronymic)+"\n\t\t\t\t")]),t._v(" "),i("p",{staticStyle:{"font-size":"16px","margin-top":"2px"}},[t._v("\n\t\t\t\t\t"+t._s(t.profile.position)+"\n\t\t\t\t")])]):t._e()])])},staticRenderFns:[]};var P={name:"profile",components:{HeaderProfile:i("VU/8")({name:"headerProfile",computed:{profile:function(){return this.$store.getters.getProfile.profile}},methods:{}},E,!1,function(t){i("j8P3")},null,null).exports},data:function(){return{page:1}},computed:d()({},Object(p.b)({getProfile:"getProfile"})),methods:{notif:function(){this.$router.push("/profile/notif")},edit:function(){this.$router.push("/profile/edit")},adm:function(){this.$router.push("/profile/adm")},logout:function(){var t=this;this.$store.dispatch("AUTH_LOGOUT").then(function(){t.$router.push("/auth")})}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[i("headerProfile"),t._v(" "),i("div",{staticClass:"mainProfile"},[i("div",[i("div",{staticClass:"menuProfile"},[i("div",{staticStyle:{"margin-top":"10px"}}),t._v(" "),i("p",{class:{active:1==t.page},on:{click:function(e){t.page=1,t.notif()}}},[t._v("УВЕДОМЛЕНИЯ")]),t._v(" "),i("p",{class:{active:2==t.page},on:{click:function(e){t.page=2,t.edit()}}},[t._v("РЕДАКТИРОВАНИЕ ПРОФИЛЯ")]),t._v(" "),t.getProfile.is_staff?i("p",{class:{active:3==t.page},on:{click:function(e){t.page=3,t.adm()}}},[t._v("АДМИНИСТРИРОВАНИЕ ПРОФИЛЕЙ")]):t._e(),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",{on:{click:function(e){t.logout()}}},[t._v("ВЫЙТИ")])])]),t._v(" "),i("router-view")],1)],1)},staticRenderFns:[]};var M=i("VU/8")(P,A,!1,function(t){i("bwPz")},null,null).exports,D={name:"maxInput",props:{value:{type:String,default:""},max:{type:Number,default:250}},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onKeyDown:function(t){this.value.length>=this.max&&t.keyCode>=48&&t.keyCode<=90&&t.preventDefault()}}},R={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"}],domProps:{value:t.internalValue},on:{keydown:t.onKeyDown,input:function(e){e.target.composing||(t.internalValue=e.target.value)}}})},staticRenderFns:[]},T={name:"edirProfile",components:{MaxInput:i("VU/8")(D,R,!1,null,null,null).exports},data:function(){return{password1:"",password2:"",first_name:"",second_name:"",patronymic:"",position:"",image:"",error:"",upload:""}},methods:{onFileChange:function(t){this.upload="Загружается...";var e=t.target.files||t.dataTransfer.files;if(e.length){var i=new FormData;i.append("profile.photo",e[0]),this.file=i,this.createImage(e[0]),this.upload=""}},createImage:function(t){new Image;var e=new FileReader,i=this;e.onload=function(t){i.image=t.target.result},e.readAsDataURL(t)},onKeyDown:function(t){if(this.second_name.length>=50)return t.preventDefault(),void console.log("keydown")},editProfile:function(){var t=this;this.eror="Профиль обновляется...";try{if(this.password1&&this.password1!=this.password2)return void(this.error="Пароли не совпадают.");this.error="",this.file&&this.$store.dispatch("USER_UPDATE_IMAGE",{token:this.$store.getters.token,data:this.file}).then(function(e){t.error="Данные профиля изменены.",t.file=""}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."});var e={profile:{}};this.password1&&(e.password=this.password1),this.first_name&&(e.profile.first_name=this.first_name),this.second_name&&(e.profile.second_name=this.second_name),this.patronymic&&(e.profile.patronymic=this.patronymic),this.position&&(e.profile.position=this.position),console.log(e),("first_name"in e.profile||"password"in e||"second_name"in e.profile||"patronymic"in e.profile||"position"in e.profile)&&(console.log("data"),this.$store.dispatch("USER_UPDATE",{token:this.$store.getters.token,data:e}).then(function(e){t.error="Данные профиля изменены.",t.password1="",t.password2="",t.first_name="",t.second_name="",t.patronymic="",t.position=""}).catch(function(e){t.error="Ошибка. Что-то пошло не так."}))}catch(t){this.eror="Ошибка. Что-то пошло не так..."}}}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editProfile"},[i("h3",{staticClass:"header"},[t._v("РЕДАКТИРОВАНИЕ ПРОФИЛЯ")]),t._v(" "),i("div",{staticClass:"editProfile2Colon"},[i("div",[i("img",{attrs:{src:t.image||"https://img.icons8.com/wired/512/000000/document.png"}})]),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("p",[t._v("Выбрать новый аватар")]),t._v(" "),i("input",{ref:"file",staticClass:"inputfile",attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v(t._s(t.upload))]),t._v(" "),i("form",{on:{submit:function(e){return e.preventDefault(),t.editProfile(e)}}},[i("p",[t._v("Пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",placeholder:"Введите имя",autocomplete:"false",max:50},model:{value:t.password1,callback:function(e){t.password1=e},expression:"password1"}}),t._v(" "),t.password1?i("div",[i("p",[t._v("Повторите пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",max:50,placeholder:"Введите пароль"},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1):t._e(),t._v(" "),i("p",[t._v("Имя")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите имя"},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}}),t._v(" "),i("p",[t._v("Фамилия")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите фамилию"},on:{keydown:t.onKeyDown},model:{value:t.second_name,callback:function(e){t.second_name=e},expression:"second_name"}}),t._v(" "),i("p",[t._v("Отчество")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите отчество"},model:{value:t.patronymic,callback:function(e){t.patronymic=e},expression:"patronymic"}}),t._v(" "),i("p",[t._v("Должность")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:200,placeholder:"Введите должность"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")],1)])])])},staticRenderFns:[]};var $=i("VU/8")(T,F,!1,function(t){i("9Sy0")},null,null).exports,I=i("fZjL"),z=i.n(I),O={name:"grid",props:{id:String,columns:Array},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),{title:{"":"ВСЕ ДОКУМЕНТЫ",common:"ОБЩИЙ ДОСТУП",myDocs:"МОИ ДОКУМЕНТЫ"},h:[],sortKey:"",filterKey:"",sortOrders:t}},created:function(){this.$store.dispatch("USER_REQUEST",this.token),this.$store.dispatch("DOCS_REQUEST",this.getProfile.id)},computed:d()({},Object(p.b)({getProfile:"getProfile",getDocs:"getDocs",token:"token",getNotif:"getNotif"}),{filteredHeroes:function(){var t={};this.columns.forEach(function(e){t[e]=1});var e=this.filterKey&&this.filterKey.toLowerCase(),i=(this.sortOrders[""],this.heroes||this.h);return e&&(i=i.filter(function(t){return z()(t).some(function(i){return String(t[i]).toLowerCase().indexOf(e)>-1})})),i},heroes:function(){var t=this;return"all"==this.$route.params.id?this.getDocs:"common"==this.$route.params.id?this.getDocs.filter(function(t){return 1==t.common}):"myDocs"==this.$route.params.id?this.getDocs.filter(function(e){return e.owner_id==t.getProfile.id}):"notif"==this.id?(this.$store.dispatch("USER_NOTIF_REQUEST",this.getProfile.id).then(function(e){t.h=e}),null):void 0}}),filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},toDoc:function(t){this.$router.push("/doc/"+t)}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid"},[i("form",{attrs:{id:"search"}},[t._v("\n\t\t\tПоиск по всем столбцам "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],attrs:{name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}})]),t._v(" "),i("table",[i("thead",[i("tr",t._l(t.columns,function(e,n){return i("th",{key:n,class:{active:t.sortKey==e},on:{click:function(i){t.sortBy(e.title)}}},[t._v("\n                        "+t._s(t._f("capitalize")(e.title))+"\n                    "),i("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}),0)]),t._v(" "),i("tbody",t._l(t.filteredHeroes,function(e,n){return i("tr",{key:n,on:{click:function(i){t.toDoc(e.id)}}},t._l(t.columns,function(n,s){return i("td",{key:s},[t._v("\n                    "+t._s(e[n.key])+"\n                    ")])}),0)}),0)])])},staticRenderFns:[]};var q=i("VU/8")(O,N,!1,function(t){i("aBzc")},null,null).exports,H={name:"adm",data:function(){return{self_id:this.$store.getters.getProfile.id,users:[],email:"",is_staff:!1,error:"",columns:[{name:"Пользователь",code:"name"},{name:"Email",code:"email"},{name:"Администратор",code:"is_staff"}]}},created:function(){var t=this;this.$store.dispatch("USER_ALL_EMAILS").then(function(e){console.log(e),t.users=e})},computed:{filteredEvents:function(){var t=this;return this.users.filter(function(e){return t.self_id!=e.id})}},methods:{addUser:function(){var t=this;0==(""==this.email?"":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.test(this.email))?this.error="Неправильный email.":(this.error="Пользователь создается...",this.$store.dispatch("AUTH_SIGNUP",{email:this.email,is_staff:this.is_staff}).then(function(e){t.error="Пользователь создан. Пароль пользователя: "+e}).catch(function(e){t.error="Пользователь не создан. Такой пользователь уже существует."}))},editStaff:function(t){var e=this;this.$store.dispatch("USER_UPDATE_STAFF",{token:this.$store.getters.token,id:t.id,is_staff:t.is_staff}).catch(function(t){e.error="Ошибка. Что-то пошло не так."})}}},Z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"adm"},[i("form",{staticStyle:{"margin-bottom":"60px"},on:{submit:function(e){return e.preventDefault(),t.addDoc(e)}}},[i("p",[t._v("Email того, кому нужно создать аккаунт")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{required:"",type:"email",placeholder:"Введите email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("p",{staticStyle:{display:"inline-block","padding-left":"15px","padding-right":"7px"}},[t._v(" Администратор")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.is_staff,expression:"is_staff"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.is_staff)?t._i(t.is_staff,null)>-1:t._q(t.is_staff,"1")},on:{change:function(e){var i=t.is_staff,n=e.target,s=n.checked?"1":"0";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.is_staff=i.concat([null])):o>-1&&(t.is_staff=i.slice(0,o).concat(i.slice(o+1)))}else t.is_staff=s}}}),t._v(" "),i("br"),t._v(" "),i("button",{attrs:{type:"button"},on:{click:t.addUser}},[t._v("СОЗДАТЬ ПОЛЬЗОВАТЕЛЯ")]),t._v(" "),i("br"),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e()]),t._v(" "),i("p",[t._v("Настройка прав пользователей")]),t._v(" "),i("table",[i("thead",[i("tr",t._l(t.columns,function(e,n){return i("th",{key:n},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)]),t._v(" "),i("tbody",t._l(t.filteredEvents,function(e,n){return i("tr",{key:n},t._l(t.columns,function(n,s){return i("td",{key:s},["is_staff"==n.code?i("div",{staticClass:"editAdm"},[t._v("\n                        "+t._s(e[n.code])+"\n                        "),i("svg",{staticClass:"editStaff",attrs:{width:"42",height:"22",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(i){e[n.code]=!e[n.code],t.editStaff(e)}}},[i("g",[i("path",{attrs:{id:"svg_2",d:"m9.27039,21.301735l21.915211,0c5.075562,0 9.204388,-4.656818 9.204388,-10.381443s-4.128826,-10.381445 -9.204388,-10.381445l-21.915211,0c-5.07556,0 -9.204386,4.65682 -9.204386,10.381445s4.128826,10.381443 9.204386,10.381443zm0,-19.774178l21.915211,0c4.59211,0 8.327774,4.213385 8.327774,9.392735s-3.735664,9.392735 -8.327774,9.392735l-21.915211,0c-4.592112,0 -8.327778,-4.213383 -8.327778,-9.392735s3.735666,-9.392735 8.327778,-9.392735z"}}),t._v(" "),e[n.code]?t._e():i("path",{attrs:{id:"svg_3",d:"m10.851694,17.103909c3.539827,0 6.419889,-2.827057 6.419889,-6.301741s-2.880062,-6.301731 -6.419889,-6.301731s-6.419897,2.827055 -6.419897,6.301731s2.880064,6.301741 6.419897,6.301741zm0,-11.495476c2.917307,0 5.291121,2.33012 5.291121,5.193735s-2.373814,5.193739 -5.291121,5.193739s-5.291124,-2.330116 -5.291124,-5.193739s2.373245,-5.193735 5.291124,-5.193735z"}}),t._v(" "),e[n.code]?i("path",{attrs:{id:"svg_8",d:"m28.549137,17.339874c3.539829,0 6.419888,-2.827057 6.419888,-6.301739s-2.880058,-6.301733 -6.419888,-6.301733s-6.419895,2.827055 -6.419895,6.301733s2.880062,6.301739 6.419895,6.301739zm0,-11.495476c2.917309,0 5.291119,2.33012 5.291119,5.193737s-2.37381,5.193737 -5.291119,5.193737s-5.291126,-2.330116 -5.291126,-5.193737s2.373245,-5.193737 5.291126,-5.193737z"}}):t._e()])])]):i("div",[t._v("\n                        "+t._s(e[n.code])+"\n                    ")])])}),0)}),0)])])},staticRenderFns:[]};var K=i("VU/8")(H,Z,!1,function(t){i("UhZy")},"data-v-79599a47",null).exports,V={name:"account",props:{id:String,data:Object},data:function(){return{doc:{},bigImage:"",image:""}},created:function(){var t=this;try{this.doc=this.$store.getters.getDoc(this.id)}catch(e){console.log(e);try{this.$store.dispatch("DOC_REQUEST",this.id).then(function(e){return t.doc=e})}catch(t){console.log(t)}}},methods:{edith:function(){console.log("dfgg")}}},j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"document"},[i("h3",{staticClass:"header"},[t._v(t._s(t.doc.title))]),t._v(" "),i("div",{staticClass:"document2Colon"},[i("div",[i("div",{staticClass:"imageScale",on:{click:function(e){t.bigImage=1}}},[i("img",{attrs:{src:t.image||"https://img.icons8.com/wired/512/000000/document.png"}})]),t._v(" "),1==t.bigImage?i("div",{on:{click:function(e){t.bigImage=0}}},[i("img",{staticClass:"bigImage",attrs:{src:t.image}}),t._v(" "),i("div",{staticClass:"bigImageBackground"})]):t._e(),t._v(" "),i("button",{on:{click:t.edith}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")]),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[i("p",[t._v("Владелец: "+t._s(t.doc.owner_name)+" ("+t._s(t.doc.owner_email)+")")]),t._v(" "),i("p",[t._v("Описание:")]),t._v("\n\t\t\t\t"+t._s(t.doc.description)+"\n\t\t\t\t"),i("p",[t._v("Общий доступ: "+t._s(t.doc.common?"да":"нет")+" ")])])])])},staticRenderFns:[]};var B=i("VU/8")(V,j,!1,function(t){i("K1PS")},null,null).exports,Q={name:"account",data:function(){return{title:"",description:"",selectedUser:"",selectedUsers:[],users:[],common:0,error:null,image:!1,file:"",upload:"",bigImage:""}},created:function(){var t=this;this.$store.dispatch("USER_ALL_EMAILS").then(function(e){console.log(e),t.users=e})},methods:{onFileChange:function(t){var e=this;this.upload="Загружается...";var i=t.target.files||t.dataTransfer.files;if(i.length){this.file=i[0],console.log(this.file);var n=i[0].name.split(".");n=n[n.length-1];if(["csv","doc","xls","xlsb","xlsx","xlt","xltx","jpg","jpeg","tif","tiff","png","bmp","mdi","gif","fax","ico","odc","odf","ppt","pptx","pdf","doc","docx","dot","dotx","wps","wpd","txt"].includes(n)){this.image="";var s=i[0].name.replace("."+n,"");this.title=s,console.log(this.file);var o=new FormData;o.append("File",i[0],i[0].name),C.a.post("https://v2.convertapi.com/convert/"+n+"/to/jpg?Secret=ib7pzQhZXO4wvQro&Token=411617234",o).then(function(t){e.file=t.data.Files[0].FileData;var i=t.data.Files[0].FileData;e.image=URL.createObjectURL(e.dataURItoBlob(i)),e.upload=""})}else this.upload="Файл с таким расширением загрузить нельзя."}},dataURItoBlob:function(t){for(var e=atob(t),i=new ArrayBuffer(e.length),n=new Uint8Array(i),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new Blob([i],{type:"image/png"})},addUser:function(){var t=this.selectedUser;this.selectedUsers.push(t),this.users=this.users.filter(function(e){return e!=t})},deleteSelectedUser:function(t){this.selectedUsers=this.selectedUsers.filter(function(e){return e!=t}),this.users.push(t)},addDoc:function(){console.log(this.selectedUsers)}}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addDoc"},[i("h3",{staticClass:"header"},[t._v("ДОБАВЛЕНИЕ ДОКУМЕНТА")]),t._v(" "),i("div",{staticClass:"addDoc2Colon"},[i("div",[i("div",{on:{click:function(e){t.bigImage=1}}},[i("img",{attrs:{src:t.image||"https://img.icons8.com/wired/512/000000/document.png"}})]),t._v(" "),1==t.bigImage?i("div",{on:{click:function(e){t.bigImage=0}}},[i("img",{staticClass:"bigImage",attrs:{src:t.image}}),t._v(" "),i("div",{staticClass:"bigImageBackground"})]):t._e()]),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.addDoc(e)}}},[i("input",{staticClass:"inputfile",attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v(t._s(t.upload))]),t._v(" "),i("p",[t._v("Имя файла")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"search-box",attrs:{required:"",type:"text",placeholder:"Введите имя",autocomplete:"usernameNew"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("p",[t._v("Запросить подпись:")]),t._v(" "),i("div",[t._l(t.selectedUsers,function(e){return i("div",{key:e.name,staticStyle:{"margin-bottom":"15px"}},[t._v("\n                            "+t._s(e.name)+"\n                            "),i("a",{staticClass:"deleteSelectedUser",on:{click:function(i){t.deleteSelectedUser(e)}}},[t._v("x")])])}),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser,expression:"selectedUser"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedUser=e.target.multiple?i:i[0]}}},t._l(t.users,function(e){return i("option",{key:e.email,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("button",{attrs:{type:"button"},on:{click:t.addUser}},[t._v("ДОБАВИТЬ")]),t._v(" "),i("br")],2),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("Описание")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"search-box",attrs:{placeholder:"Опишите документ"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),i("p"),t._v(" Общий доступ "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.common,expression:"common"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.common)?t._i(t.common,null)>-1:t._q(t.common,"1")},on:{change:function(e){var i=t.common,n=e.target,s=n.checked?"1":"0";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.common=i.concat([null])):o>-1&&(t.common=i.slice(0,o).concat(i.slice(o+1)))}else t.common=s}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{class:{disabled:!this.image},attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]),t._v(" "),t.error?i("p",[t._v(" "+t._s(t.error)+" ")]):t._e()])])])},staticRenderFns:[]};var W=i("VU/8")(Q,G,!1,function(t){i("e27s")},null,null).exports,Y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account"},[e("div",{staticClass:"account2"},[e("p",[this._v("Не найдено.")])])])}]};var J,X,tt,et,it,nt=i("VU/8")({name:"account"},Y,!1,function(t){i("FhJ5")},null,null).exports,st=i("bOdI"),ot=i.n(st),rt=(i("OMJi"),{state:{profile:{}},getters:{getProfile:function(t){return t.profile},isProfileLoaded:function(t){return!!t.profile.name}},actions:(J={},ot()(J,"USER_REQUEST",function(t,e){var i=t.commit,n=t.dispatch;t.state;return new o.a(function(t,s){C.a.get(r+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+e}}).then(function(t){i("USER_SUCCESS",t.data[0]),n("DOCS_REQUEST",t.data[0].id)}).catch(function(t){s(t.response.request.response),n("AUTH_LOGOUT")})})}),ot()(J,"USER_NOTIF_REQUEST",function(t,e){t.commit,t.dispatch;return new o.a(function(t,i){C.a.get("http://127.0.0.1:8000/api/users/"+e+"/notif/").then(function(e){t(e.data)}).catch(function(t){i(t.response.request.response)})})}),ot()(J,"USER_UPDATE",function(t,e){var i=t.commit;t.dispatch;return new o.a(function(t,n){C.a.get(r+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+e.token}}).then(function(s){C.a.patch(r+"/api/users/i/"+s.data[0].id,e.data,{headers:{Authorization:"Token "+e.token}}).then(function(e){i("USER_SUCCESS",e.data),t(e)}).catch(function(t){n(t)})}).catch(function(t){n(t.response.request.response)})})}),ot()(J,"USER_UPDATE_IMAGE",function(t,e){var i=t.commit,n=(t.dispatch,t.state);return new o.a(function(t,s){console.log(n.token),C.a.patch(r+"/api/users/i/"+n.profile.id,e.data,{headers:{Authorization:"Token "+e.token,"Content-Type":"multipart/form-data"}}).then(function(e){t(e),i("USER_SUCCESS",e.data)}).catch(function(t){s(t.response.request.response)})})}),ot()(J,"USER_UPDATE_STAFF",function(t,e){t.commit,t.dispatch;return new o.a(function(t,i){C.a.patch(r+"/api/users/i/"+e.id,{is_staff:e.is_staff},{headers:{Authorization:"Token "+e.token}}).catch(function(t){i(t.response.request.response)})})}),ot()(J,"USER_ALL_EMAILS",function(t){t.commit,t.dispatch,t.state;return new o.a(function(t,e){C.a.get(r+"/api/users/all_emails/").then(function(e){t(e.data)}).catch(function(t){e(t.response.request.response)})})}),ot()(J,"USER_CONFIRM_UPDATE_PASSWORD",function(t,e){t.commit,t.dispatch;return new o.a(function(t,i){C.a.post(r+"/api/users/rest_auth/password/reset/",{email:e}).then(function(e){t(e)}).catch(function(t){i(t.response.request.response)})})}),ot()(J,"USER_CHANGE_PASSWORD",function(t,e){t.commit,t.dispatch;return new o.a(function(t,i){console.log(e),C.a.post(r+"/api/users/rest_auth/password/reset/confirm/",{uid:e.uid,token:e.token,new_password1:e.password1,new_password2:e.password2}).then(function(e){t(e)}).catch(function(t){i(t.response.request.response)})})}),J),mutations:ot()({},"USER_SUCCESS",function(t,e){n.a.set(t,"profile",e)})}),at={state:{token:localStorage.getItem("user-token")||""},getters:{token:function(t){return t.token},isAuthenticated:function(t){return!!t.token}},actions:(X={},ot()(X,"AUTH_SIGNUP",function(t,e){t.commit,t.dispatch;var i=t.state;return new o.a(function(t,n){console.log(e),C.a.post(r+"/api/users/send_invite/",{email:e.email,is_staff:e.is_staff},{headers:{Authorization:"Token "+i.token}}).then(function(e){t(e.data.password)}).catch(function(t){n(t.response.request.response)})})}),ot()(X,"AUTH_REQUEST",function(t,e){var i=t.commit,n=t.dispatch;t.state;return new o.a(function(t,s){C.a.post(r+"/api/users/get_auth_token/",{email:e.email,password:e.password}).then(function(e){var s=e.data.token;i("AUTH_TOKEN",e.data),localStorage.setItem("user-token",s),C.a.defaults.headers.common.Authorization=s,n("USER_REQUEST",s),t(e)}).catch(function(t){localStorage.removeItem("user-token"),s(t.response.request.response)})})}),ot()(X,"AUTH_LOGOUT",function(t){var e=t.commit;t.dispatch;return new o.a(function(t,i){e("AUTH_LOGOUT"),localStorage.removeItem("user-token"),delete C.a.defaults.headers.common.Authorization,t()})}),X),mutations:(tt={},ot()(tt,"AUTH_TOKEN",function(t,e){t.token=e.token}),ot()(tt,"AUTH_LOGOUT",function(t){t.token="",t.profile={}}),tt)};i("mvHQ"),i("lHA8"),i("Gu7T"),i("O84Y");var ct={state:{docs:[]},getters:{getDocs:function(t){return t.docs},getDoc:function(t){return function(e){return t.docs.filter(function(t){return t.id==e})[0]}},getFolder:function(t){return t.folder}},actions:(et={},ot()(et,"DOCS_REQUEST",function(t,e){var i=t.commit,n=t.dispatch;t.store;return new o.a(function(t,s){C.a.get("http://127.0.0.1:8000/api/docs").then(function(t){C.a.get("http://127.0.0.1:8000/api/users/"+e+"/docs/").then(function(e){var o=t.data,r=(o=o.concat(e.data)).reduce(function(t,e){return t.map[e.id]?t:(t.map[e.id]=!0,t.docs2.push(e),t)},{map:{},docs2:[]}).docs2;n("USER_ALL_EMAILS").then(function(t){console.log(r);try{r.forEach(function(e){try{var i=t.find(function(t){return t.id===e.owner_id});e.owner_email=i.email,e.owner_name=i.name}catch(t){}console.log("after 1",r);try{var n=t.find(function(t){return t.id===e.user.id});e.owner_email=n.email,e.owner_name=n.name}catch(t){}}),i("DOCS_SUCCESS",r)}catch(t){console.log(t)}}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),ot()(et,"DOC_REQUEST",function(t,e){t.commit;var i=t.dispatch;return new o.a(function(t,e){var n={id:1,owner_id:1,title:"Файл1",file:"http://localhost:8000/uVyuTHdBDN8.jpg",description:"gngfnfghjhg fdg terte t",date:"2019-05-12",common:!0,signature:null};i("USER_ALL_EMAILS").then(function(t){try{var e=t.find(function(t){return t.id===n.owner_id});n.owner_email=e.email,n.owner_name=e.name}catch(t){console.log(t)}}).catch(function(t){e(t.response.request.response)}),t(n)})}),ot()(et,"DOC_UPLOAD",function(t,e){var i=t.commit;t.dispatch;i("DOC_SUCCESS");return"1234"}),et),mutations:(it={},ot()(it,"DOCS_SUCCESS",function(t,e){n.a.set(t,"docs",e)}),ot()(it,"DOC_REQUEST_SUCCESS",function(t,e){t.doc.push(e)}),it)},lt=i("424j");n.a.use(p.a);var ut=new p.a.Store({modules:{user:rt,auth:at,doc:ct},strict:!1,plugins:[Object(lt.a)()]}),dt=i("sUu7");n.a.use(x.a),n.a.use(dt.a);var pt=function(t,e,i){ut.getters.isAuthenticated?i():i("/auth")},ft=new x.a({mode:"history",routes:[{path:"/",component:b,children:[{path:"",redirect:"/d/all"},{path:"d/:id",component:q,props:{columns:[{key:"title",title:"Название"},{key:"owner_name",title:"Владелец"},{key:"date",title:"Дата добавления"}]}}],beforeEnter:pt},{path:"/auth",name:"auth",component:l,beforeEnter:function(t,e,i){ut.getters.isAuthenticated?i("/"):i()}},{path:"/addDoc",name:"addDoc",component:W,beforeEnter:pt},{path:"/doc/:id",name:"doc",component:B,props:!0,beforeEnter:pt},{path:"/editProfile",name:"editProfile",component:$,beforeEnter:pt},{path:"/profile",redirect:"/profile/notif",component:M,children:[{path:"notif",name:"notif",component:q,props:{id:"notif",columns:[{key:"user_id",title:"Инициатор"},{key:"message",title:"Сообщение"},{key:"date",title:"Дата добавления"}]}},{path:"edit",component:$},{path:"adm",component:K,beforeEnter:function(t,e,i){ut.getters.getProfile.is_staff?i():i("/")}}],beforeEnter:pt},{path:"*",component:nt}]});n.a.config.productionTip=!1;var mt=localStorage.getItem("user-token");mt&&(C.a.defaults.headers.common.Authorization=mt),new n.a({el:"#app",router:ft,store:ut,components:{App:S},template:"<App/>"})},U1hK:function(t,e){},UhZy:function(t,e){},aBzc:function(t,e){},bwPz:function(t,e){},e27s:function(t,e){},eWIM:function(t,e){},gDI6:function(t,e){},j8P3:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.eef4416a2b38c8ecd8de.js.map